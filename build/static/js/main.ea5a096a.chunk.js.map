{"version":3,"sources":["components/Filter.jsx","components/PersonForm.jsx","components/NumbersList.jsx","services/person.js","App.js","index.js"],"names":["Filter","props","react_default","a","createElement","value","filter","onChange","e","setFilter","target","result","persons","person","name","toLowerCase","includes","setPersonsFiltered","PersonForm","setNewName","setNewNumber","addName","newName","newNumber","onSubmit","type","Person","_ref","removePerson","concat","number","onClick","NumbersList","_ref2","personsFiltered","setMessage","length","map","NumbersList_Person","key","url","getPersons","axios","get","Notification","message","notificationStyle","position","top","left","backgroundColor","border","borderRadius","padding","width","personName","error","style","Object","objectSpread","App","_useState","useState","_useState2","slicedToArray","setPersons","_useState3","_useState4","_useState5","_useState6","_useState7","_useState8","_useState9","_useState10","_useState11","_useState12","React","useEffect","then","response","console","log","data","personExists","find","components_Filter","App_Notification","components_PersonForm","preventDefault","window","confirm","personToUpdate","put","id","setTimeout","catch","err","post","addPerson","toConsumableArray","components_NumbersList","personId","delete","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.ea5a096a.chunk.js","sourcesContent":["import React from 'react';\n\nconst Filter = props => {\n  const handleFilterChange = e => {\n    props.setFilter(e.target.value);\n    const result = props.persons.filter(person => \n      person.name.toLowerCase().includes(e.target.value.toLowerCase())\n    );\n    props.setPersonsFiltered(result);\n  };\n\n  return <input value={props.filter} onChange={handleFilterChange}/>;\n};\n\nexport default Filter;\n","import React from 'react';\n\nconst PersonForm = props => {\n  const { setNewName, setNewNumber, addName, newName, newNumber} = props;\n  \n  const handleNameChange = e => {\n    setNewName(e.target.value);\n  };\n\n  const handleNumberChange = e => {\n    setNewNumber(e.target.value);\n  };\n\n  return (\n    <form onSubmit={addName}>\n        <div>\n          name: <input value={newName} onChange={handleNameChange}/>\n        </div>\n        <div>\n          number: <input value={newNumber} onChange={handleNumberChange}/>\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  );\n};\n\nexport default PersonForm;\n","import React from 'react';\n\nconst Person = ({ person, removePerson }) => (\n  <li>\n    {`${person.name} ${person.number}`}\n    <button type={'button'} onClick={() => removePerson(person)}> Delete </button>\n  </li>\n);\n\nconst NumbersList = ({ filter, personsFiltered, persons, removePerson, setMessage }) => (\n  <ul>\n    {\n      filter.length > 0 \n        ? personsFiltered.map(person => <Person key={person.name} removePerson={removePerson} person={person} />)\n        : persons.map(person => <Person key={person.name} removePerson={removePerson} person={person} />)\n    }\n  </ul>\n);\n\nexport default NumbersList;\n","import axios from 'axios';\n\nconst url = '/api/persons';\n\nconst getPersons = () => axios.get(url);\n\nconst addPerson = person => axios.post(url, person);\n\nconst removePerson = personId => axios.delete(`${url}/${personId}`);\n\nconst updateNumber = person => console.log(person) || axios.put(`${url}/${person.id}`, person);\n\nexport {\n  getPersons,\n  addPerson,\n  removePerson,\n  updateNumber,\n}\n","import React, { useState } from 'react';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport NumbersList from './components/NumbersList';\nimport { getPersons, addPerson, removePerson, updateNumber } from './services/person';\n\nconst Notification = ({ message }) => {\n  const notificationStyle = {\n    position: 'absolute',\n    top: '10px',\n    left: '10px',\n    backgroundColor: 'white',\n    border: '3px solid green',\n    borderRadius: '3px',\n    padding: '10px',\n    width: 'calc(100vw - 50px)',\n  }\n  \n  if (message === null) {\n    return null;\n  }\n\n  const { type, personName, error } = message;\n\n  if (type === 'addSuccess') {\n    return (\n      <div style={notificationStyle}>\n        Entry for {personName} has been added.\n      </div>\n    )\n  }\n  \n  if (type === 'deleteSuccess') {\n    return (\n      <div style={notificationStyle}>\n        Entry for {personName} has been removed.\n      </div>\n    )\n  }\n\n  if (type === 'updateSuccess') {\n    return (\n      <div style={notificationStyle}>\n        Number for {personName} has been updated.\n      </div>\n    )\n  }\n\n  if (type === 'updateError') {\n    return (\n      <div style={{...notificationStyle, border: '3px solid red'}}>\n        Could not find entry for {personName}.\n      </div>\n    )\n  }\n  \n  if (type === 'updateValidationError') {\n    return (\n      <div style={{...notificationStyle, border: '3px solid red'}}>\n        {error}.\n      </div>\n    )\n  }\n\n  if (type === 'addError') {\n    return (\n      <div style={{...notificationStyle, border: '3px solid red'}}>\n        {error}\n      </div>\n    )\n  }\n}\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [filter, setFilter] = useState('');\n  const [personsFiltered, setPersonsFiltered] = useState([]);\n  const [message, setMessage] = useState(null);\n\n  React.useEffect(() => {\n    getPersons()\n      .then(response => console.log(response.data) || setPersons(response.data));\n  }, [])\n\n  const personExists = () => {\n    return persons.find(person => person.name.toLowerCase() === newName.toLowerCase());\n  };\n\n  const addName = e => {\n    e.preventDefault();\n    \n    if (personExists()) {\n      if (!window.confirm(`${newName} is already added to phonebook, replace the old number with new one?`)) {\n        return;\n      };\n\n      const personToUpdate = personExists();\n\n      updateNumber({\n        ...personToUpdate,\n        number: newNumber,\n      })\n        .then(() => getPersons())\n        .then(response => setPersons(response.data))\n        .then(() => setMessage({type: 'updateSuccess', personName: newName }))\n        .then(() => setTimeout(() => { \n          setMessage(null) \n        }, 2000))\n        .catch(err => {\n          if (err.response.data.error) {\n            setMessage({ type: 'updateValidationError', error: err.response.data.error })\n          } else {\n            setMessage({ type: 'updateError', personName: newName })\n          }\n        })\n        .then(() => setTimeout(() => {\n          setMessage(null)\n        }, 2000));\n\n      return;\n    }\n    \n    addPerson({ name: newName, number: newNumber })\n      .then(response => {\n        setPersons([\n          ...persons,\n          response.data,\n        ])\n      })\n      .then(() => setMessage({type: 'addSuccess', personName: newName }))\n      .then(() => setTimeout(() => { \n        setMessage(null) \n      }, 2000))\n      .catch(err => {\n        setMessage({type: 'addError', error: err.response.data.error})\n        console.log(err.response);\n      })\n      .then(() => setTimeout(() => { \n        setMessage(null) \n      }, 4000))\n\n    setNewName('');\n    setNewNumber('');\n  }\n\n  const remove = person => {\n    if (!window.confirm(`Are you sure you want to delete ${person.name}?`)) {\n      return;\n    }\n\n    removePerson(person.id)\n      .then(() => getPersons())\n      .then(response => setPersons(response.data))\n      .then(() => setMessage({type: 'deleteSuccess', personName: person.name }))\n      .then(() => setTimeout(() => { \n        setMessage(null) \n      }, 2000));;\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <h3>Filter</h3>\n      <Filter \n        setPersonsFiltered={setPersonsFiltered}\n        setFilter={setFilter}\n        persons={persons}\n        filter={filter}\n      />\n      <h3>Add new entry</h3>\n      <Notification message={message} />\n      <PersonForm\n        setNewName={setNewName}\n        setNewNumber={setNewNumber}\n        addName={addName}\n        newName={newName}\n        // newNumber={newNumber}\n      />\n      <h3>Numbers</h3>\n      <NumbersList \n        filter={filter}\n        personsFiltered={personsFiltered}\n        persons={persons}\n        removePerson={remove}\n      />\n    </div>\n  )\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}